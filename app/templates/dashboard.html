{% extends "base.html" %}

{% block content %}
<div class="container my-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3><i class="bi bi-person-badge-fill me-2"></i>Painel de {{ username }} (#{{ farm_id }})</h3>
        <a href="{{ url_for('main.index') }}" class="btn btn-secondary btn-sm">Buscar outra fazenda</a>
    </div>

    {% if error %}
    <div class="alert alert-danger" role="alert">
        <strong>Erro:</strong> {{ error }}
    </div>
    {% endif %}

    <ul class="nav nav-tabs" id="dashboardTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview-pane" type="button" role="tab" aria-controls="overview-pane" aria-selected="true">
                <i class="bi bi-grid-1x2-fill me-1"></i> Visao Geral
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="inventory-tab" data-bs-toggle="tab" data-bs-target="#inventory-pane" type="button" role="tab" aria-controls="inventory-pane" aria-selected="false">
                <i class="bi bi-box-seam-fill me-1"></i> Inventario
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="expansion-tab" data-bs-toggle="tab" data-bs-target="#expansion-pane" type="button" role="tab" aria-controls="expansion-pane" aria-selected="false">
                <i class="bi bi-arrows-fullscreen me-1"></i> Assessor de Expansão
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="deliveries-tab" data-bs-toggle="tab" data-bs-target="#deliveries-pane" type="button" role="tab" aria-controls="deliveries-pane" aria-selected="false">
                <i class="bi bi-truck me-1"></i> Entregas
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="chores-tab" data-bs-toggle="tab" data-bs-target="#chores-pane" type="button" role="tab" aria-controls="chores-pane" aria-selected="false">
                <i class="bi bi-check2-square me-1"></i> Tarefas
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="fishing-tab" data-bs-toggle="tab" data-bs-target="#fishing-pane" type="button" role="tab" aria-controls="fishing-pane" aria-selected="false">
                <i class="bi bi-fish me-1"></i> Peixes
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="flowers-tab" data-bs-toggle="tab" data-bs-target="#flowers-pane" type="button" role="tab" aria-controls="flowers-pane" aria-selected="false">
                <i class="bi bi-flower2 me-1"></i> Flores
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="treasure_dig-tab" data-bs-toggle="tab" data-bs-target="#treasure_dig-pane" type="button" role="tab" aria-controls="treasure_dig-pane" aria-selected="false">
                <i class="bi bi-unlock-fill me-1"></i> Escavação de Tesouros
            </button>
        </li>
               
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="resources-tab" data-bs-toggle="tab" data-bs-target="#resources-pane" type="button" role="tab" aria-controls="resources-pane" aria-selected="false">
                <i class="bi bi-bug-fill me-1"></i> Análise de Recursos
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="layout-map-tab" data-bs-toggle="tab" data-bs-target="#layout-map-pane" type="button" role="tab" aria-controls="layout-map-pane" aria-selected="false">
                <i class="bi bi-map-fill me-1"></i> Mapa da Fazenda
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="buds-tab" data-bs-toggle="tab" data-bs-target="#buds-pane" type="button" role="tab" aria-controls="buds-pane" aria-selected="false">
                <i class="bi bi-bug-fill me-1"></i> Buds
            </button>
        </li>
    </ul>

    <div class="tab-content" id="dashboardTabsContent">
        <div class="tab-pane fade show active" id="overview-pane" role="tabpanel" aria-labelledby="overview-tab">
            {% include 'partials/_geral_panel.html' %}
        </div>

        <div class="tab-pane fade" id="expansion-pane" role="tabpanel" aria-labelledby="expansion-tab">
            {% include 'partials/_expansion_panel.html' %}
        </div>

        <div class="tab-pane fade" id="inventory-pane" role="tabpanel" aria-labelledby="inventory-pane">
            {% include 'partials/_inventory_panel.html' %}
        </div>

        <div class="tab-pane fade" id="deliveries-pane" role="tabpanel" aria-labelledby="deliveries-tab">
            {% include 'partials/_deliveries_panel.html' %}
        </div>

        <div class="tab-pane fade" id="chores-pane" role="tabpanel" aria-labelledby="chores-tab">
            {% include 'partials/_chores_panel.html' %}
        </div>

        <div class="tab-pane fade" id="fishing-pane" role="tabpanel" aria-labelledby="fishing-pane">
            {% include 'partials/_fishing_panel.html' %}
        </div>

        <div class="tab-pane fade" id="flowers-pane" role="tabpanel" aria-labelledby="flowers-tab">
            {% include 'partials/_flowers_panel.html' %}
        </div>

        <div class="tab-pane fade" id="treasure_dig-pane" role="tabpanel" aria-labelledby="treasure_dig-pane">
            {% include 'partials/_treasuredig_panel.html' %}
        </div>
        
       
        <div class="tab-pane fade" id="layout-map-pane" role="tabpanel" aria-labelledby="layout-map-tab">
            {% include 'partials/_layout_map_panel.html' %}
        </div>

        <div class="tab-pane fade" id="buds-pane" role="tabpanel" aria-labelledby="buds-tab">
            {% include 'partials/_buds_panel.html' %}
        </div>
    </div>
</div>

<!-- PAINEL DE CONTROLE FLUTUANTE -->
{% include 'partials/_floating_controls.html' %}

{% endblock %}


{% block scripts %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}" type="module"></script>
<script src="{{ url_for('static', filename='js/card_positioner.js') }}" type="module"></script>
<script src="{{ url_for('static', filename='js/resource_info_card.js') }}" type="module"></script>
<script src="{{ url_for('static', filename='js/summary_card.js') }}" type="module"></script>
{% endblock %}