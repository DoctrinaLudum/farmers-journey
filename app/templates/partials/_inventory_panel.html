{# app/templates/partials/_inventory_panel.html #}

{# 1. Importamos a nossa nova macro a partir do arquivo de componentes #}
{% from 'partials/_components.html' import inventory_card %}

<ul class="nav nav-tabs" id="inventoryTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="recursos-naturais-tab" data-bs-toggle="tab" data-bs-target="#recursos-naturais-pane" type="button" role="tab">Recursos Naturais</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="recursos-animais-tab" data-bs-toggle="tab" data-bs-target="#recursos-animais-pane" type="button" role="tab">Recursos Animais</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="ferramentas-tab" data-bs-toggle="tab" data-bs-target="#ferramentas-pane" type="button" role="tab">Ferramentas</button>
    </li>
</ul>

<div class="tab-content" id="inventoryTabsContent">
    <div class="tab-pane fade show active" id="recursos-naturais-pane" role="tabpanel">
        {# 2. Esta div será o container para o nosso layout Masonry #}
        <div id="inventory-grid">
            <div class="inventory-sizer"></div>
            {% set recursos_categories = ["Recursos", "Colheitas", "Frutas", "Flores", "Estufa", "Tesouros_e_Achados"] %}
            
            {# 3. O loop agora é muito mais simples! #}
            {% for category_name in recursos_categories %}
                {% if category_name in categorized_inventory %}
                    {# Para cada categoria, chamamos a macro com o novo parâmetro. #}
                    {{ inventory_card(
                        category_title=category_name, 
                        items=categorized_inventory[category_name], 
                        category_id=category_name|replace(' ', '-'),
                        start_expanded=True
                    ) }}
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <div class="tab-pane fade" id="recursos-animais-pane" role="tabpanel">
        <div class="row g-3 p-3">
            {# ... (aqui faremos o mesmo para as outras categorias no futuro) ... #}
        </div>
    </div>
    <div class="tab-pane fade" id="ferramentas-pane" role="tabpanel">
        <div class="row g-3 p-3">
            {# ... (aqui faremos o mesmo para as outras categorias no futuro) ... #}
        </div>
    </div>
</div>